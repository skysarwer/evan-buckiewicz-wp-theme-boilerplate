// Thanks to Hugo Giraudel for his str-replace function (http://www.sassmeister.com/gist/1b4f2da5527830088e4d)
@function str-replace($string, $search, $replace: '') {
    $index: str-index($string, $search);
    @if $index {
      @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
    }
    @return $string;
  }
  
  $encoding-reference: (
    //('%','%25'),  // Encode "%" first, otherwise the "%" from encoded code would be encoded again (which would be bad)
    ('<','%3C'),
    ('>','%3E'),
    //('"','%22'),  // Replace " with ' because that's shorter than %22 and normally working
    ('"','\''),
    ('#','%23'),
    ('&','%26')
    // Here are a few more characters you could encode
    //(' ','%20'),
    //('!','%21'),
    //('$','%24'),
    //(',','%27'),
    //('(','%28'),
    //(')','%29'),
    //('*','%2A'),
    //('+','%2B'),
    //('"','%2C'),
    //('/','%2F'),
    //(':','%3A'),
    //(';','%3B'),
    //('=','%3D'),
    //('?','%3F'),
    //('@','%40'),
    //('[','%5B'),
    //(']','%5D'),
    //('^','%5E'),
    //('`','%60'),
    //('{','%7B'),
    //('|','%7C'),
    //('}','%7D'),
    //('~','%7E'),
    //(',','%E2%80%9A'),
    //('\\','%5C'),
    //('_','%5F'),
    //('-','%2D'),
    //('.','%2E'),
    // ('\','%5C'),
    // (' ','%7F'),
    // ('`','%E2%82%AC'),
    //('ƒ','%C6%92'),
    //('„','%E2%80%9E'),
    //('…','%E2%80%A6'),
    //('†','%E2%80%A0'),
    //('‡','%E2%80%A1'),
    //('ˆ','%CB%86'),
    //('‰','%E2%80%B0'),
    //('Š','%C5%A0'),
    //('‹','%E2%80%B9'),
    //('Œ','%C5%92'),
    //('','%C5%8D'),
    //('Ž','%C5%BD'),
    //('','%8F'),
    //('','%C2%90'),
    //(','%'E2%80%98'),
    //(','%'E2%80%99'),
    //('“','%E2%80%9C'),
    //('”','%E2%80%9D'),
    //('•','%E2%80%A2'),
    //('–','%E2%80%93'),
    //('—','%E2%80%94'),
    //('˜','%CB%9C'),
    //('™','%E2%84'),
    //('š','%C5%A1'),
    //('›','%E2%80'),
    //('œ','%C5%93'),
    //('','%9D'),
    //('ž','%C5%BE'),
    //('Ÿ','%C5%B8'),
    //(' ','%C2%A0'),
    //('¡','%C2%A1'),
    //('¢','%C2%A2'),
    //('£','%C2%A3'),
    //('¤','%C2%A4'),
    //('¥','%C2%A5'),
    //('¦','%C2%A6'),
    //('§','%C2%A7'),
    //('¨','%C2%A8'),
    //('©','%C2%A9'),
    //('ª','%C2%AA'),
    //('«','%C2%AB'),
    //('¬','%C2%AC'),
    //(','%'C2%AD'),
    //('®','%C2%AE'),
    //('¯','%C2%AF'),
    //('°','%C2%B0'),
    //('±','%C2%B1'),
    //('²','%C2%B2'),
    //('³','%C2%B3'),
    //('´','%C2%B4'),
    //('µ','%C2%B5'),
    //('¶','%C2%B6'),
    //('·','%C2%B7'),
    //('¸','%C2%B8'),
    //('¹','%C2%B9'),
    //('º','%C2%BA'),
    //('»','%C2%BB'),
    //('¼','%C2%BC'),
    //('½','%C2%BD'),
    //('¾','%C2%BE'),
    //('¿','%C2%BF'),
    //('À','%C3%80'),
    //('Á','%C3%81'),
    //('Â','%C3%82'),
    //('Ã','%C3%83'),
    //('Ä','%C3%84'),
    //('Å','%C3%85'),
    //('Æ','%C3%86'),
    //('Ç','%C3%87'),
    //('È','%C3%88'),
    //('É','%C3%89'),
    //('Ê','%C3%8A'),
    //('Ë','%C3%8B'),
    //('Ì','%C3%8C'),
    //('Í','%C3%8D'),
    //('Î','%C3%8E'),
    //('Ï','%C3%8F'),
    //('Ð','%C3%90'),
    //('Ñ','%C3%91'),
    //('Ò','%C3%92'),
    //('Ó','%C3%93'),
    //('Ô','%C3%94'),
    //('Õ','%C3%95'),
    //('Ö','%C3%96'),
    //('×','%C3%97'),
    //('Ø','%C3%98'),
    //('Ù','%C3%99'),
    //('Ú','%C3%9A'),
    //('Û','%C3%9B'),
    //('Ü','%C3%9C'),
    //('Ý','%C3%9D'),
    //('Þ','%C3%9E'),
    //('ß','%C3%9F'),
    //('à','%C3%A0'),
    //('á','%C3%A1'),
    //('â','%C3%A2'),
    //('ã','%C3%A3'),
    //('ä','%C3%A4'),
    //('å','%C3%A5'),
    //('æ','%C3%A6'),
    //('ç','%C3%A7'),
    //('è','%C3%A8'),
    //('é','%C3%A9'),
    //('ê','%C3%AA'),
    //('ë','%C3%AB'),
    //('ì','%C3%AC'),
    //('í','%C3%AD'),
    //('î','%C3%AE'),
    //('ï','%C3%AF'),
    //('ð','%C3%B0'),
    //('ñ','%C3%B1'),
    //('ò','%C3%B2'),
    //('ó','%C3%B3'),
    //('ô','%C3%B4'),
    //('õ','%C3%B5'),
    //('ö','%C3%B6'),
    //('÷','%C3%B7'),
    //('ø','%C3%B8'),
    //('ù','%C3%B9'),
    //('ú','%C3%BA'),
    //('û','%C3%BB'),
    //('ü','%C3%BC'),
    //('ý','%C3%BD'),
    //('þ','%C3%BE'),
    //('ÿ','%C3%BF')
  );
  
 @function svg-encode($svg) {
    @each $char, $encoded in $encoding-reference {
      $svg: str-replace($svg, $char, $encoded);
    }
    @return 'data:image/svg+xml,' + $svg;
}
  
@function svg-caret($fill-color) {
    @return '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9666 4666"><path fill="' + $fill-color + '" d="M559 1233c0,0 4452,3201 4452,3201 0,0 4396,-3212 4396,-3212 0,0 -706,-963 -706,-963 0,0 -3701,2685 -3701,2685 0,0 -3741,-2687 -3741,-2687 0,0 -700,976 -700,976z"/></svg>';
}

$caret-accent: svg-caret($color__text-light);
$caret-link: svg-caret($color__link-hover);

@function open-quote($fill-color, $fill-outline) { 
  @return '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 113333 101666"><circle fill="' + $fill-color + '" fill-rule="nonzero"  cx="13471" cy="13007" r="10228"/><circle fill="' + $fill-color + '" fill-rule="nonzero"  cx="41679" cy="13007" r="10228"/><path fill="' + $fill-outline + '" fill-rule="nonzero"  d="M13317 1291c-6664,0 -12169,5215 -12169,11733l0 1159c725,9850 5215,18542 17673,27378 1014,725 1884,1015 2753,0 579,-724 579,-1738 -580,-2607 -6229,-4635 -10574,-9416 -13182,-14776 1594,869 3477,1304 5505,1304 6808,0 12313,-5360 12313,-12458 0,-6518 -5505,-11733 -12313,-11733zm40561 11733c0,-6518 -5505,-11733 -12314,-11733 -6663,0 -12168,5215 -12168,11733l0 1159c724,9850 5215,18542 17673,27378 1014,725 1883,1015 2752,0 580,-724 580,-1738 -579,-2607 -6229,-4635 -10575,-9416 -13182,-14776 1593,869 3476,1304 5504,1304 6809,0 12314,-5360 12314,-12458zm-40561 8402c-4636,0 -8112,-3767 -8112,-8402 0,-4056 3766,-7678 8112,-7678 4490,0 8257,3622 8257,7678 0,4635 -3477,8402 -8257,8402zm28247 -16080c4491,0 8257,3622 8257,7678 0,4635 -3476,8402 -8257,8402 -4635,0 -8112,-3767 -8112,-8402 0,-4056 3767,-7678 8112,-7678z"/><polygon fill="' + $fill-outline + '" fill-rule="nonzero"  points="113144,25983 67584,25239 67616,23240 113176,23983 "/><polygon fill="' + $fill-outline + '" fill-rule="nonzero" points="29061,101424 28689,55862 30672,55845 31044,101407 "/></svg>';
}